---
title: "セルフホストDify: ナレッジパイプでファイルアップロードするためには環境変数が必要"
emoji: "🦒"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["dify"]
# publication_name: "gigooo_blog"
published: true
---

## はじめに

お久しぶりです。最近、Difyを使っている輪ごむです。
社内で自由に使えるDifyの環境が用意されているのですが、OllamaやLMStudioと連携させたり、自由に遊べる環境が欲しかったのでセルフホストした際に発生した問題の対処法を備忘録として残しておきます。

## 問題

ナレッジパイプラインのソースにFileを選択し、任意のナレッジパイプラインを作成した際に、以下画像のようなエラーが発生しました。
エラーメッセージに書いてあるように、lFILES_URLを設定していないことによって発生するエラーです。

![](/images/20251229_gigooo_dify/img1.png)

空で設定されている、FILES_URLを以下のように設定することでアップロードができるようになりました。
```env
FILES_URL=http://api:5001
```

![](/images/20251229_gigooo_dify/img2.png)


## おわりに

セットアップガイドのとおり、`.env.example`をコピーして、`docker compose up -d`で全部動くと思っていましたが、そうでもないようです。
